(function(n){if(typeof window==="undefined"){return}var L=0,N=false,x=false,o="message",R=o.length,D="[iFrameSizer]",g=D.length,r=null,p=window.requestAnimationFrame,c={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},O={},C=null,k="Host Page",G={autoResize:true,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:true,inPageLinks:false,enablePublicMethods:true,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:false,maxHeight:Infinity,maxWidth:Infinity,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:false,sizeHeight:true,sizeWidth:false,warningTimeout:5000,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){m("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return true}};function S(V,T,U){if("addEventListener" in window){V.addEventListener(T,U,false)}else{if("attachEvent" in window){V.attachEvent("on"+T,U)}}}function f(U,T,V){if("removeEventListener" in window){U.removeEventListener(T,V,false)}else{if("detachEvent" in window){U.detachEvent("on"+T,V)}}}function h(){var U=["moz","webkit","o","ms"],T;for(T=0;T<U.length&&!p;T+=1){p=window[U[T]+"RequestAnimationFrame"]}if(!(p)){i("setup","RequestAnimationFrame not supported")}}function I(U){var T="Host page: "+U;if(window.top!==window.self){if(window.parentIFrame&&window.parentIFrame.getId){T=window.parentIFrame.getId()+": "+U}else{T="Nested host page: "+U}}return T}function q(T){return D+"["+I(T)+"]"}function b(T){return O[T]?O[T].log:N}function i(U,T){B("log",U,T,b(U))}function P(U,T){B("info",U,T,b(U))}function m(U,T){B("warn",U,T,true)}function B(U,W,V,T){if(true===T&&"object"===typeof window.console){console[U](q(W),V)}}function y(ar){function T(){function au(){J(ae);v(aj)}U("Height");U("Width");e(au,ae,"init")}function ao(){var au=Z.substr(g).split(":");return{iframe:O[au[0]].iframe,id:au[0],height:au[1],width:au[2],type:au[3]}}function U(ay){var au=Number(O[aj]["max"+ay]),aw=Number(O[aj]["min"+ay]),ax=ay.toLowerCase(),av=Number(ae[ax]);i(aj,"Checking "+ax+" is in range "+aw+"-"+au);if(av<aw){av=aw;i(aj,"Set "+ax+" to min value")}if(av>au){av=au;i(aj,"Set "+ax+" to max value")}ae[ax]=""+av}function aq(){function aw(){function ax(){var az=0,aA=false;i(aj,"Checking connection is from allowed list of origins: "+av);for(;az<av.length;az++){if(av[az]===au){aA=true;break}}return aA}function ay(){var az=O[aj].remoteHost;i(aj,"Checking connection is from: "+az);return au===az}return av.constructor===Array?ax():ay()}var au=ar.origin,av=O[aj].checkOrigin;if(av&&(""+au!=="null")&&!aw()){throw new Error("Unexpected message received from: "+au+" for "+ae.iframe.id+". Message was: "+ar.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.")}return true}function ap(){return D===((""+Z).substr(0,g))&&(Z.substr(g).split(":")[0] in O)}function am(){var au=ae.type in {"true":1,"false":1,"undefined":1};if(au){i(aj,"Ignoring init message from meta parent page")}return au}function ai(au){return Z.substr(Z.indexOf(":")+R+au)}function ak(au){i(aj,"MessageCallback passed: {iframe: "+ae.iframe.id+", message: "+au+"}");ab("messageCallback",{iframe:ae.iframe,message:JSON.parse(au)});i(aj,"--")}function W(){var av=document.body.getBoundingClientRect(),au=ae.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:au.height,iframeWidth:au.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(au.top-av.top,10),offsetLeft:parseInt(au.left-av.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})}function ac(av,aw){function au(){E("Send Page Info","pageInfo:"+W(),av,aw)}j(au,32)}function Y(){function av(az,aA){function ay(){if(O[aw]){ac(O[aw].iframe,aw)}else{au()}}["scroll","resize"].forEach(function(aB){i(aw,az+aB+" listener for sendPageInfo");aA(window,aB,ay)})}function au(){av("Remove ",f)}function ax(){av("Add ",S)}var aw=aj;ax();O[aw].stopPageInfo=au}function ag(){if(O[aj]&&O[aj].stopPageInfo){O[aj].stopPageInfo();delete O[aj].stopPageInfo}}function X(){var au=true;if(null===ae.iframe){m(aj,"IFrame ("+ae.id+") not found");au=false}return au}function at(av){var au=av.getBoundingClientRect();d(aj);return{x:Math.floor(Number(au.left)+Number(r.x)),y:Math.floor(Number(au.top)+Number(r.y))}}function an(ay){function au(){r=av;V();i(aj,"--")}function aw(){return{x:Number(ae.width)+ax.x,y:Number(ae.height)+ax.y}}function az(){if(window.parentIFrame){window.parentIFrame["scrollTo"+(ay?"Offset":"")](av.x,av.y)}else{m(aj,"Unable to scroll to requested position, window.parentIFrame not found")}}var ax=ay?at(ae.iframe):{x:0,y:0},av=aw();i(aj,"Reposition requested from iFrame (offset x:"+ax.x+" y:"+ax.y+")");if(window.top!==window.self){az()}else{au()}}function V(){if(false!==ab("scrollCallback",r)){v(aj)}else{t()}}function al(au){function ax(){var aA=at(ay);i(aj,"Moving to in page link (#"+az+") at x: "+aA.x+" y: "+aA.y);r={x:aA.x,y:aA.y};V();i(aj,"--")}function av(){if(window.parentIFrame){window.parentIFrame.moveToAnchor(az)}else{i(aj,"In page link #"+az+" not found and window.parentIFrame not found")}}var az=au.split("#")[1]||"",aw=decodeURIComponent(az),ay=document.getElementById(aw)||document.getElementsByName(aw)[0];if(ay){ax()}else{if(window.top!==window.self){av()}else{i(aj,"In page link #"+az+" not found")}}}function ab(au,av){return H(aj,au,av)}function af(){if(O[aj].firstRun){aa()}switch(ae.type){case"close":F(ae.iframe);break;case"message":ak(ai(6));break;case"scrollTo":an(false);break;case"scrollToOffset":an(true);break;case"pageInfo":ac(O[aj].iframe,aj);Y();break;case"pageInfoStop":ag();break;case"inPageLink":al(ai(9));break;case"reset":u(ae);break;case"init":T();ab("initCallback",ae.iframe);ab("resizedCallback",ae);break;default:T();ab("resizedCallback",ae)}}function ad(av){var au=true;if(!O[av]){au=false;m(ae.type+" No settings for "+av+". Message was: "+Z)}return au}function ah(){for(var au in O){E("iFrame requested init",l(au),document.getElementById(au),au)}}function aa(){O[aj].firstRun=false}var Z=ar.data,ae={},aj=null;if("[iFrameResizerChild]Ready"===Z){ah()}else{if(ap()){ae=ao();aj=k=ae.id;clearTimeout(O[aj].msgTimeout);if(!am()&&ad(aj)){i(aj,"Received: "+Z);if(X()&&aq()){af()}}}else{P(aj,"Ignored: "+Z)}}}function H(X,V,W){var T=null,U=null;if(O[X]){T=O[X][V];if("function"===typeof T){U=T(W)}else{throw new TypeError(V+" on iFrame["+X+"] is not a function")}}return U}function F(T){var U=T.id;i(U,"Removing iFrame: "+U);if(T.parentNode){T.parentNode.removeChild(T)}H(U,"closedCallback",U);i(U,"--");delete O[U]}function d(T){if(null===r){r={x:(window.pageXOffset!==n)?window.pageXOffset:document.documentElement.scrollLeft,y:(window.pageYOffset!==n)?window.pageYOffset:document.documentElement.scrollTop};i(T,"Get page position: "+r.x+","+r.y)}}function v(T){if(null!==r){window.scrollTo(r.x,r.y);i(T,"Set page position: "+r.x+","+r.y);t()}}function t(){r=null}function u(U){function T(){J(U);E("reset","reset",U.iframe,U.id)}i(U.id,"Size reset requested by "+("init"===U.type?"host page":"iFrame"));d(U.id);e(T,U,"reset")}function J(V){function T(Y){V.iframe.style[Y]=V[Y]+"px";i(V.id,"IFrame ("+X+") "+Y+" set to "+V[Y]+"px")}function W(Y){if(!x&&"0"===V[Y]){x=true;i(X,"Hidden iFrame detected, creating visibility listener");a()}}function U(Y){T(Y);W(Y)}var X=V.iframe.id;if(O[X]){if(O[X].sizeHeight){U("height")}if(O[X].sizeWidth){U("width")}}}function e(U,T,V){if(V!==T.type&&p){i(T.id,"Requesting animation frame");p(U)}else{U()}}function E(V,U,Y,T,W){function aa(){var ac=O[T].targetOrigin;i(T,"["+V+"] Sending msg to iframe["+T+"] ("+U+") targetOrigin: "+ac);Y.contentWindow.postMessage(D+U,ac)}function X(){m(T,"["+V+"] IFrame("+T+") not found")}function Z(){if(Y&&"contentWindow" in Y&&(null!==Y.contentWindow)){aa()}else{X()}}function ab(){function ac(){m(T,"No response from iFrame. Check iFrameResizer.contentWindow.js has been loaded in iFrame")}if(!!W){O[T].msgTimeout=setTimeout(ac,O[T].warningTimeout)}}T=T||Y.id;if(O[T]){Z();ab()}}function l(T){return T+":"+O[T].bodyMarginV1+":"+O[T].sizeWidth+":"+O[T].log+":"+O[T].interval+":"+O[T].enablePublicMethods+":"+O[T].autoResize+":"+O[T].bodyMargin+":"+O[T].heightCalculationMethod+":"+O[T].bodyBackground+":"+O[T].bodyPadding+":"+O[T].tolerance+":"+O[T].inPageLinks+":"+O[T].resizeFrom+":"+O[T].widthCalculationMethod}function A(ab,ai){function ag(){function aj(al){if((Infinity!==O[ad][al])&&(0!==O[ad][al])){ab.style[al]=O[ad][al]+"px";i(ad,"Set "+al+" = "+O[ad][al]+"px")}}function ak(al){if(O[ad]["min"+al]>O[ad]["max"+al]){throw new Error("Value for min"+al+" can not be greater than max"+al)}}ak("Height");ak("Width");aj("maxHeight");aj("minHeight");aj("maxWidth");aj("minWidth")}function Z(){var aj=((ai&&ai.id)||G.id+L++);if(null!==document.getElementById(aj)){aj=aj+L++}return aj}function W(aj){k=aj;if(""===aj){ab.id=aj=Z();N=(ai||{}).log;k=aj;i(aj,"Added missing iframe ID: "+aj+" ("+ab.src+")")}return aj}function ac(){i(ad,"IFrame scrolling "+(O[ad].scrolling?"enabled":"disabled")+" for "+ad);ab.style.overflow=false===O[ad].scrolling?"hidden":"auto";switch(O[ad].scrolling){case true:ab.scrolling="yes";break;case false:ab.scrolling="no";break;default:ab.scrolling=O[ad].scrolling}}function Y(){if(("number"===typeof(O[ad].bodyMargin))||("0"===O[ad].bodyMargin)){O[ad].bodyMarginV1=O[ad].bodyMargin;O[ad].bodyMargin=""+O[ad].bodyMargin+"px"}}function aa(){var ak=O[ad].firstRun,aj=O[ad].heightCalculationMethod in c;if(!ak&&aj){u({iframe:ab,height:0,width:0,type:"init"})}}function V(){if(Function.prototype.bind){O[ad].iframe.iFrameResizer={close:F.bind(null,O[ad].iframe),resize:E.bind(null,"Window resize","resize",O[ad].iframe),moveToAnchor:function(aj){E("Move to anchor","moveToAnchor:"+aj,O[ad].iframe,ad)},sendMessage:function(aj){aj=JSON.stringify(aj);E("Send Message","message:"+aj,O[ad].iframe,ad)}}}}function ah(ak){function aj(){E("iFrame.onload",ak,ab,n,true);aa()}S(ab,"load",aj);E("init",ak,ab,n,true)}function X(aj){if("object"!==typeof aj){throw new TypeError("Options is not an object")}}function U(aj){for(var ak in G){if(G.hasOwnProperty(ak)){O[ad][ak]=aj.hasOwnProperty(ak)?aj[ak]:G[ak]}}}function T(aj){return(""===aj||"file://"===aj)?"*":aj}function af(aj){aj=aj||{};O[ad]={firstRun:true,iframe:ab,remoteHost:ab.src.split("/").slice(0,3).join("/")};X(aj);U(aj);O[ad].targetOrigin=true===O[ad].checkOrigin?T(O[ad].remoteHost):"*"}function ae(){return(ad in O&&"iFrameResizer" in ab)}var ad=W(ab.id);if(!ae()){af(ai);ac();ag();Y();ah(l(ad));V()}else{m(ad,"Ignored iFrame, already setup.")}}function j(T,U){if(null===C){C=setTimeout(function(){C=null;T()},U)}}function a(){function W(){function X(ab){function aa(ac){return"0px"===O[ab].iframe.style[ac]}function Z(ac){return(null!==ac.offsetParent)}if(Z(O[ab].iframe)&&(aa("height")||aa("width"))){E("Visibility change","resize",O[ab].iframe,ab)}}for(var Y in O){X(Y)}}function V(X){i("window","Mutation observed: "+X[0].target+" "+X[0].type);j(W,16)}function T(){var Z=document.querySelector("body"),Y={attributes:true,attributeOldValue:false,characterData:true,characterDataOldValue:false,childList:true,subtree:true},X=new U(V);X.observe(Z,Y)}var U=window.MutationObserver||window.WebKitMutationObserver;if(U){T()}}function s(U){function T(){M("Window "+U,"resize")}i("window","Trigger event: "+U);j(T,16)}function w(){function T(){M("Tab Visable","resize")}if("hidden"!==document.visibilityState){i("document","Trigger event: Visiblity change");j(T,16)}}function M(T,U){function V(X){return"parent"===O[X].resizeFrom&&O[X].autoResize&&!O[X].firstRun}for(var W in O){if(V(W)){E(T,U,document.getElementById(W),W)}}}function K(){S(window,"message",y);S(window,"resize",function(){s("resize")});S(document,"visibilitychange",w);S(document,"-webkit-visibilitychange",w);S(window,"focusin",function(){s("focus")});S(window,"focus",function(){s("focus")})}function z(){function W(X,Y){function Z(){if(!Y.tagName){throw new TypeError("Object is not a valid DOM element")}else{if("IFRAME"!==Y.tagName.toUpperCase()){throw new TypeError("Expected <IFRAME> tag, found <"+Y.tagName+">")}}}if(Y){Z();A(Y,X);V.push(Y)}}function T(X){if(X&&X.enablePublicMethods){m("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}}var V;h();K();return function U(X,Y){V=[];T(X);switch(typeof(Y)){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(Y||"iframe"),W.bind(n,X));break;case"object":W(X,Y);break;default:throw new TypeError("Unexpected data type ("+typeof(Y)+")")}return V}}function Q(U){if(!U.fn){P("","Unable to bind to jQuery, it is not fully loaded.")}else{if(!U.fn.iFrameResize){U.fn.iFrameResize=function T(V){function W(X,Y){A(Y,V)}return this.filter("iframe").each(W).end()}}}}if(window.jQuery){Q(window.jQuery)}if(typeof define==="function"&&define.amd){define([],z)}else{if(typeof module==="object"&&typeof module.exports==="object"){module.exports=z()}else{window.iFrameResize=window.iFrameResize||z()}}})();